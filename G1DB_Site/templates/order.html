{% extends 'base.html' %}
{% load bootstrap5 %}

{% block title%}Order Online{% endblock %}

{% block content %}

    <div class="flex-container">
        <div class="flex-child border_round" id="list_items">
            <h1 style="color:crimson"> Menu Items</h1>
            <hr>
            <div>
                <div id="item1" class="item_name"> Pizza </div>
                <div id="price1" value="15">22</div>
                <button onclick="f1(this)" value="new item"> Add new item</button>
            </div>
            <p>Four cheeses (mozzarella, parmesan, pecorino, jarlsberg)</p>
            <hr>

            <div>
                <div id="item2" class="item_name"> Grilled chicken Margherita </div>
                <div id="price2" value="15">15</div>
                <button onclick="f1(this)" value="new item"> Add new item</button>
            </div>
            <p>Four cheeses (mozzarella, parmesan, pecorino, jarlsberg)</p>
            <hr>

            <div>
                <div id="item3" class="item_name">Formaggio </div>
                <div id="price3" value="10">10</div>
                <button onclick="f1(this)" value="new item"> Add new item</button>
            </div>
            <p>Fresh tomatoes, mozzarella, chicken, onions</p>
            <hr>

            <div>
                <div id="item4" class="item_name"> Pizza </div>
                <div id="price4" value="15">7</div>
                <button onclick="f1(this)" value="new item"> Add new item</button>
            </div>
            <p>Four cheeses (mozzarella, parmesan, pecorino, jarlsberg)</p>
            <hr>

            <div>
                <div id="item5" class="item_name"> Grilled chicken Margherita </div>
                <div id="price5" value="15">13</div>
                <button onclick="f1(this)" value="new item"> Add new item</button>
            </div>
            <p>Four cheeses (mozzarella, parmesan, pecorino, jarlsberg)</p>
            <hr>

            <div>
                <div id="item6" class="item_name">Formaggio </div>
                <div id="price6" value="12">12</div>
                <button onclick="f1(this)" value="new item"> Add new item</button>
            </div>
            <p>Fresh tomatoes, mozzarella, chicken, onions</p>
            <hr>
            <div>
                <div id="item7" class="item_name"> Pizza </div>
                <div id="price7" value="8">8</div>
                <button onclick="f1(this)" value="new item"> Add new item</button>
            </div>
            <p>Four cheeses (mozzarella, parmesan, pecorino, jarlsberg)</p>
            <hr>

            <div>
                <div id="item8" class="item_name"> Grilled chicken Margherita </div>
                <div id="price8" value="9">9</div>
                <button onclick="f1(this)" value="new item"> Add new item</button>
            </div>
            <p>Four cheeses (mozzarella, parmesan, pecorino, jarlsberg)</p>
            <hr>

            <div>
                <div id="item9" class="item_name">Formaggio </div>
                <div id="price9" value="12">12</div>
                <button onclick="f1(this)" value="new item"> Add new item</button>
            </div>
            <p>Fresh tomatoes, mozzarella, chicken, onions</p>
            <hr>


        </div>


        <div class="flex-child" id="right_wrapper" style="border: none;">
            <div class="flex-container border_round" id="right_box">

                <div class="flex-child" style="border: none;">
                    Cart:<br>
                    <ul id="foodlist"></ul>
                </div>
                <div class="flex-child" style="border: none;">
                    <br>
                    <ul id="pricelist" style="list-style-type: none;"></ul>

                </div>

            </div>

            <div id="customer_address">
                <div id="customer_info" class="border_round">
                    <form method="POST" action="">
                        {% csrf_token %}
                        <div>Delivery Information:<br>
                            <input type="text" placeholder="First Name">
                            <input type="text" placeholder="Last Name">
                            <input type="text" placeholder="Address Line 1">
                            <input type="text" id="zipcode" name="zipcode" placeholder="Zip Code"><br><br>
                        </div>

                        <button onclick="display_hotspots()">check for delivery/hotspot options</button>
                    </form>
                </div>

                <div class="flex-container" id="bottom_box">
                    <div class="flex-child border_round" id="hotspot_div">
                        <!-- <table>
                            <tr>
                               // <th id="rank">This zipcode is rank: {{ rank }}</th>
                                <script type="text/javascript">
                                    var benefit = {{ rank }}
                                    var benefitItem = document.createElement("button");
                                    switch (benefit) {
                                        case 1:
                                            // benefitItem.innerHTML = "\n Benefit: Free Delivery";
                                            // document.getElementById("rank").parentElement.appendChild(benefitItem);
                                            document.getElementById("hs_div1").style.visibility = 'visible';
                                        //TODO: Add more cases here!
                                        case 2:
                                        document.getElementById("hs_div2").style.visibility = 'visible';
                                        case 3:
                                        document.getElementById("hs_div3").style.visibility = 'visible';
                                            // benefitItem.innerHTML = "\n Standard Delivery Fee";
                                            // document.getElementById("rank").parentElement.appendChild(benefitItem);
                                    }

                                </script>
                            </tr>
                        </table> -->
                        <div id="hs_div1">
                            <span>Free Delivery - $</span>
                            <span id="hotspot1" value="0">0</span>
                            <button id="hs1" onclick="f2(this)"> select </button>
                            <hr>
                        </div>
                        <div id="hs_div2">
                            <span>Best buy parking lot - $</span>
                            <span id="hotspot2" value="1">1</span>
                            <button id="hs2" onclick="f2(this)"> select </button>
                            <hr>
                        </div>
                        <div id="hs_div3">
                            <span>Giant foods parking lot - $</span>
                            <span id="hotspot3" value="2">2</span>
                            <button id="hs3" onclick="f2(this)"> select </button>
                            <hr>
                        </div>
                        <div id="hs_div4">
                            <span>Walmart parking lot - $</span>
                            <span id="hotspot4" value="10">3</span>
                            <button id="hs4" onclick="f2(this)"> select </button>
                            <hr>
                        </div>
                        <div id="hs_div5">
                            <span>Target parking lot - $</span>
                            <span id="hotspot5" value="10">4</span>
                            <button id="hs5" onclick="f2(this)"> select </button>
                            <hr>
                        </div>
                        <div id="hs_div6">
                            <span> Standard delivery Fee - $</span>
                            <span id="hotspot6" value="10">6</span>
                            <button id="hs6" onclick="f2(this)"> select </button>
                            <hr>
                        </div>
                        <script type="text/javascript">
                            var benefit = {{ rank }}

                            if (benefit == 1) {
                                document.getElementById("hs_div1").style.visibility = 'visible';
                                document.getElementById("hs_div6").style.visibility = 'hidden';

                            } else if (benefit == 2 || 3 || 4 || 5) {

                                document.getElementById("hs_div2").style.visibility = 'visible';
                                document.getElementById("hs_div3").style.visibility = 'visible';
                                document.getElementById("hs_div4").style.visibility = 'visible';
                                document.getElementById("hs_div5").style.visibility = 'visible';

                            }
                        </script>

                    </div>
                    <div class="flex-child border_round">

                        <form method="POST" action="">
                            {% csrf_token %}

                            Sub-total : &nbsp;&nbsp; &nbsp; <input type="text" id="amount"
                                style="width: 40px; border: none;" placeholder="amount" name="amount" value="0.00"
                                readonly><br>
                            Delivery fee :&nbsp; <input type="text" style="width: 40px; border: none;" id="deliveryfee"
                                placeholder="deliveryfee" name="deliveryfee" value="0.00" style="width: 40px;"
                                readonly><br>
                            Tax : &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <input type="text" id="tax"
                                style="width: 40px; border: none;" placeholder="tax" name="tax" value="0" readonly><br>
                            Total : &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <input type="text" id="total"
                                style="width: 40px; border: none;" placeholder="total" name="total" value="0"
                                readonly><br>
                            <input type="submit" value="Place Order" style="width:100%; background-color: darkolivegreen;"
                                onclick="return alert('Order Placed.. Thanks!')">

                        </form>
                    </div>

                </div>
            </div>
        </div>
    </div>
    </div>
    <script>
        var subtot = 0;
        var total = 0;
        var tax = 0;
        function display_hotspots() {
            console.log("hello");
            // var check_zip = document.getElementById("zipcode").value;
            // var zipcode =  {{ rank }};


            // if (zipcode == 1) {
            //     document.getElementById("hs_div1").style.visibility = 'visible';

            // }
            // else if (check_zip == zipcode_arr[1] || check_zip == zipcode_arr[2] || check_zip == zipcode_arr[3] || check_zip == zipcode_arr[4]) {
            //     document.getElementById("hs_div2").style.visibility = 'visible';
            //     document.getElementById("hs_div3").style.visibility = 'visible';
            //     document.getElementById("hs_div4").style.visibility = 'visible';
            //     document.getElementById("hs_div5").style.visibility = 'visible';
            // }

        }
    <div class="flex-child">
        <ul id="pricelist"></ul>

    </div>

</div>

<div id="customer_address">
    <form method="POST" action="">
        {% csrf_token %}
    <div>Delivery Information:<br>
    <input type="text" placeholder="First Name">
    <input type="text" placeholder="Last Name">
    <input type="text" placeholder="Address Line 1">
    <input type="text" id="zipcode" name="zipcode" placeholder="Zip Code"><br><br>
    </div>

    <button onclick="display_hotspots()">check for delivery/hotspot options</button>
    </form>
<br><br>

<div class="flex-container" id="bottom_box">
    <div class="flex-child" id="hotspot_div">
    <table>
            <tr>
                <th id="rank">This zipcode is rank: {{ rank }}</th>
                <script type="text/javascript">
                    var benefit = {{ rank }}
                    var benefitItem = document.createElement("th");
                    switch ( benefit ) {
                        case 1:
                        benefitItem.innerHTML = "\n Benefit: Free Delivery";
                        document.getElementById("rank").parentElement.appendChild(benefitItem);
                        //TODO: Add more cases here!
                    }
                </script>
            </tr>
    </table>
            <!-- <div id="hs_div1">
            <span>Free Delivery - $</span>
            <span id="hotspot1" value="0">0</span>
            <button id="hs1" onclick="f2(this)"> select </button><hr>
           </div>
           <div id="hs_div2">
            <span>Best buy parking lot - $</span>
            <span id="hotspot2" value="1">1</span>
            <button id="hs2" onclick="f2(this)"> select </button><hr>
           </div>
           <div id="hs_div3">
            <span>Giant foods parking lot - $</span>
            <span id="hotspot3" value="2">2</span>
            <button id="hs3" onclick="f2(this)"> select </button><hr>
           </div>
           <div id="hs_div4">
            <span>Walmart parking lot - $</span>
            <span id="hotspot4" value="10">3</span>
            <button id="hs4" onclick="f2(this)"> select </button><hr>
           </div>
           <div id="hs_div5">
            <span>Target parking lot - $</span>
            <span id="hotspot5" value="10">4</span>
            <button id="hs5" onclick="f2(this)"> select </button><hr>
           </div> -->
    </div>

</div>
</div>
</div>
</div>
</div>
<script>
    var subtot = 0;
    var total = 0;
    var tax = 0;
function display_hotspots(){
        document.getElementById("hs_div1").style.visibility='hidden';
        document.getElementById("hs_div2").style.visibility='hidden';
        document.getElementById("hs_div3").style.visibility='hidden';
        document.getElementById("hs_div4").style.visibility='hidden';
        document.getElementById("hs_div5").style.visibility='hidden';
    var zipcode_arr = ['10001', '10002', '10003', '10004', '10005'];
    var check_zip = document.getElementById("zipcode").value;

    if (check_zip == zipcode_arr[0]){
        document.getElementById("hs_div1").style.visibility='visible';
        // document.getElementById("hs_div2").style.visibility='visible';
        // document.getElementById("hs_div3").style.visibility='visible';
        // document.getElementById("hs_div4").style.visibility='visible';
        // document.getElementById("hs_div5").style.visibility='visible';
    }
    else if(check_zip == zipcode_arr[1] || check_zip == zipcode_arr[2] || check_zip == zipcode_arr[3] || check_zip == zipcode_arr[4]){
        document.getElementById("hs_div2").style.visibility='visible';
        document.getElementById("hs_div3").style.visibility='visible';
        document.getElementById("hs_div4").style.visibility='visible';
        document.getElementById("hs_div5").style.visibility='visible';
    }

}


function f1(objButton){

	var food = objButton.previousElementSibling.previousElementSibling.innerHTML;
	var price = parseInt(objButton.previousElementSibling.innerHTML, 10);

    let li = document.createElement("li");
    li.textContent = food;
    document.getElementById("foodlist").appendChild(li);

    let lii = document.createElement("li");
    lii.textContent = price;
    document.getElementById("pricelist").appendChild(lii);

    subtot = subtot + price;
    document.getElementById("amount").value = subtot;

    tax = tax + 1;
    document.getElementById("tax").value = tax;

    total = subtot + tax;
    document.getElementById("total").value = total;
}

function f2(objButton){
    var delivery_fee = parseInt(objButton.previousElementSibling.innerHTML, 10);
    document.getElementById("deliveryfee").value = delivery_fee;

}


        function f1(objButton) {

            var food = objButton.previousElementSibling.previousElementSibling.innerHTML;
            var price = parseInt(objButton.previousElementSibling.innerHTML, 10);

            let li = document.createElement("li");
            li.textContent = food;
            document.getElementById("foodlist").appendChild(li);

            let lii = document.createElement("li");
            lii.textContent = price;
            document.getElementById("pricelist").appendChild(lii);

            subtot = subtot + price;
            document.getElementById("amount").value = subtot;

            tax = tax + 1;
            document.getElementById("tax").value = tax;

            total = subtot + tax;
            document.getElementById("total").value = total;
        }

        function f2(objButton) {
            var delivery_fee = parseInt(objButton.previousElementSibling.innerHTML, 10);
            document.getElementById("deliveryfee").value = delivery_fee;

        }

    </script>

{% endblock %}
